<div class="secretkey-container" @slideUp>
  <!-- Not Approved Loans grid start -->
  <div class="secretkey-form">
    <div class="col-md-4 col-xs-12 col-sm-12 margin-top-15">
      <div class="label" style="color: white;">Search by Username or DCID</div>
      <input type="text" id="txtSearcByLoanId" class="form-control" placeholder="Search by Username or DCID" (input)="onSearchChange($event.target.value)"
      />
    </div>
    <div class="col-md-8 col-xs-12 col-sm-12 margin-top-40">
      <a>
        <i class="material-icons i-styles" pTooltip="{{'refresh' | translate}}" tooltipPosition="top" (click)="ngOnInit()">refresh</i>
      </a>
    </div>
    <div class="clearfix"></div>
    <div>
      <h3 class="col-md-12 col-sm-12 col-xs-12" style="color: #dadae2;font-size: x-large;font-weight: bold;">Pending Loans</h3>
      <div class="clearfix"></div>
      <br/>

      <!-- Show list of Pending Loans start here -->
      <div>
        <div *ngIf="listOfPendingLoans!=0" style="overflow: auto;">
          <p-dataTable [value]="listOfPendingLoans" [loading]="false" [rows]="10" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[5,10,20]"
            selectionMode="single" [(selection)]="selectedRow">
            <p-column [style]="{'width':'140px'}" header="Loan Details" field="LoanID" [sortable]="true">
              <ng-template let-listOfPendingLoans="rowData" pTemplate="body" let-ri="rowIndex">
                <button type="button" style="width: 70px" class="ui-button-reset-transparent" pButton (click)="ViewLoanDetails(ri)">View</button>
              </ng-template>
            </p-column>
            <p-column [style]="{'width':'100px'}" field="LoanID" header="LoanID" [sortable]="true"></p-column>
            <p-column [style]="{'width':'130px'}" field="LoanAmount" header="Loan Amount" [sortable]="true"></p-column>
            <p-column [style]="{'width':'130px'}" field="IssuedAmount" header="Issued Amount" [sortable]="true"></p-column>
            <p-column [style]="{'width':'125px'}" field="AmountToPay" header="Amount To Pay" [sortable]="true"></p-column>
            <p-column [style]="{'width':'130px'}" field="AdminCharges" header="Admin Charges" [sortable]="true"></p-column>
            <p-column [style]="{'width':'130px'}" field="ModeofTransferType" header="Modeof Transfer" [sortable]="true"> </p-column>
            <p-column [style]="{'width':'105px'}" field="LoanStatusID" header="Payment" [sortable]="true">
              <ng-template let-listOfPendingLoans="rowData" pTemplate="body" let-ri="rowIndex">
                <div class="col-md-12" style="margin-left: -15px;">
                  {{getLoanStatus(listOfPendingLoans.LoanStatusID)}}
                </div>
              </ng-template>
            </p-column>
            <p-column [style]="{'width':'105px'}" field="LoanApprovalStatus" header="Loan Status" [sortable]="true"> </p-column>
            <p-column [style]="{'width':'130px'}" field="LoanTypeDescription" header="Loan Type" [sortable]="true"> </p-column>
            <p-column [style]="{'width':'130px'}" field="CreatedOn" header="Applied Date" [sortable]="true"></p-column>
          </p-dataTable>
        </div>

        <!--when row length is 0-->
        <div class="PTB70" *ngIf="listOfPendingLoans==0">
          <div class="col-md-12 text-center">
            <p>{{'noRecords' | translate}}</p>
          </div>
          <div class="clearfix"></div>
        </div>
      </div>
      <!-- Show list of Pending Loans end here -->

    </div>
    <div class="clearfix"></div>
  </div>
  <div class="clearfix"></div>

  <div style="height:20px;margin-top: -5px;background-color: #afa5a5;">
  </div>
  <!-- Approved Loans grid start -->
  <div class="secretkey-form">
    <div>
      <h3 class="col-md-12 col-sm-12 col-xs-12" style="color: #dadae2;font-size: x-large;font-weight: bold;">Approved Loans</h3>
      <div class="clearfix"></div>

      <!-- Show list of Approved Loans start here -->
      <div>
        <div *ngIf="listOfApprovedLoans!=0" style="overflow: auto;">
          <p-dataTable id="approvedloand" [value]="listOfApprovedLoans" [loading]="false" [rows]="10" [paginator]="true" [pageLinks]="3"
            [rowsPerPageOptions]="[5,10,20]" selectionMode="single" [(selection)]="selectedRow">
            <p-column [style]="{'width':'100px'}" field="LoanID" header="LoanID" [sortable]="true"></p-column>
            <p-column [style]="{'width':'130px'}" field="LoanAmount" header="Loan Amount" [sortable]="true"></p-column>
            <p-column [style]="{'width':'130px'}" field="IssuedAmount" header="Issued Amount" [sortable]="true"></p-column>
            <p-column [style]="{'width':'125px'}" field="AmountToPay" header="Amount To Pay" [sortable]="true"></p-column>
            <p-column [style]="{'width':'130px'}" field="AdminCharges" header="Admin Charges" [sortable]="true"></p-column>
            <p-column [style]="{'width':'130px'}" field="ModeofTransferType" header="Modeof Transfer" [sortable]="true"> </p-column>
            <p-column [style]="{'width':'105px'}" field="LoanStatusID" header="Payment" [sortable]="true">
              <ng-template let-listOfApprovedLoans="rowData" pTemplate="body" let-ri="rowIndex">
                <div class="col-md-12" style="margin-left: -15px;">
                  {{getLoanStatus(listOfApprovedLoans.LoanStatusID)}}
                </div>
              </ng-template>
            </p-column>
            <p-column [style]="{'width':'105px'}" field="LoanApprovalStatus" header="Loan Status" [sortable]="true"> </p-column>
            <p-column [style]="{'width':'130px'}" field="LoanTypeDescription" header="Loan Type" [sortable]="true"> </p-column>
            <p-column [style]="{'width':'130px'}" field="CreatedOn" header="Applied Date" [sortable]="true"></p-column>
          </p-dataTable>
        </div>

        <!--when row length is 0-->
        <div class="PTB70" *ngIf="listOfApprovedLoans==0">
          <div class="col-md-12 text-center">
            <p>{{'noRecords' | translate}}</p>
          </div>
          <div class="clearfix"></div>
        </div>
      </div>
      <!-- Show list of Approved Loans end here -->

    </div>
    <div class="clearfix"></div>
  </div>
  <!-- Approved Loans grid end -->

  <div style="height:20px;margin-top: -5px;background-color: #afa5a5;">
  </div>
  <!-- Rejected Loans grid start -->
  <div class="secretkey-form">
    <div>
      <h3 class="col-md-12 col-sm-12 col-xs-12" style="color: #dadae2;font-size: x-large;font-weight: bold;">Rejected Loans</h3>
      <div class="clearfix"></div>

      <!-- Show list of Rejected Loans start here -->
      <div>
        <div *ngIf="listOfRejectedLoans!=0" style="overflow: auto;">
          <p-dataTable id="approvedloand" [value]="listOfRejectedLoans" [loading]="false" [rows]="10" [paginator]="true" [pageLinks]="3"
            [rowsPerPageOptions]="[5,10,20]" selectionMode="single" [(selection)]="selectedRow">
            <p-column [style]="{'width':'100px'}" field="LoanID" header="LoanID" [sortable]="true"></p-column>
            <p-column [style]="{'width':'130px'}" field="LoanAmount" header="Loan Amount" [sortable]="true"></p-column>
            <p-column [style]="{'width':'130px'}" field="IssuedAmount" header="Issued Amount" [sortable]="true"></p-column>
            <p-column [style]="{'width':'125px'}" field="AmountToPay" header="Amount To Pay" [sortable]="true"></p-column>
            <p-column [style]="{'width':'130px'}" field="AdminCharges" header="Admin Charges" [sortable]="true"></p-column>
            <p-column [style]="{'width':'130px'}" field="ModeofTransferType" header="Modeof Transfer" [sortable]="true"> </p-column>
            <p-column [style]="{'width':'105px'}" field="LoanStatusID" header="Payment" [sortable]="true">
              <ng-template let-listOfRejectedLoans="rowData" pTemplate="body" let-ri="rowIndex">
                <div class="col-md-12" style="margin-left: -15px;">
                  {{getLoanStatus(listOfRejectedLoans.LoanStatusID)}}
                </div>
              </ng-template>
            </p-column>
            <p-column [style]="{'width':'105px'}" field="LoanApprovalStatus" header="Loan Status" [sortable]="true"> </p-column>
            <p-column [style]="{'width':'130px'}" field="LoanTypeDescription" header="Loan Type" [sortable]="true"> </p-column>
            <p-column [style]="{'width':'130px'}" field="CreatedOn" header="Applied Date" [sortable]="true"></p-column>
          </p-dataTable>
        </div>

        <!--when row length is 0-->
        <div class="PTB70" *ngIf="listOfRejectedLoans==0">
          <div class="col-md-12 text-center">
            <p>{{'noRecords' | translate}}</p>
          </div>
          <div class="clearfix"></div>
        </div>
      </div>
      <!-- Show list of Rejected Loans end here -->

    </div>
    <div class="clearfix"></div>
  </div>
  <!-- Rejected Loans grid end -->

  <div class="downloa-popup-modal" *ngIf="isShowModal == 2" @dialog>
    <div>
      <div class="modal-container">
        <div class="modal-header">
          <h5 class="col-md-12 col-sm-12 col-xs-12" style="color: #00c8aa !important;background-color: #72767e;">Loan Details</h5>
          <i class="material-icons" pTooltip="Close" tooltipPosition="top" (click)="isShowModal = 1">close</i>
        </div>
        <div class="clearfix"></div>
        <div class="modal-body" style="height: auto;">
          <div class="row col-md-12">
            <div class="col-md-12">
              <div class="col-md-4">
                <div class="label">Loan ID : {{LoanID}}</div>
              </div>
              <div class="col-md-4">
                <div class="label">Group ID : {{GroupID}}</div>
              </div>
              <div class="col-md-4">
                <div class="label">Loan Amount : {{LoanAmount}}</div>
              </div>
            </div>
            <div class="clearfix"></div>
            <div class="col-md-12">
              <div class="col-md-4">
                <div class="label">Issued Amount :{{IssuedAmount}}</div>
              </div>
              <div class="col-md-4">
                <div class="label">Amount To Pay :{{AmountToPay}}</div>
              </div>
              <div class="col-md-4">
                <div class="label">Admin Charges :{{AdminCharges}}</div>
              </div>
            </div>
            <div class="clearfix"></div>
            <div class="clearfix"></div>
            <div class="col-md-12">
              <div class="col-md-4">
                <div class="label">Mode of Transfer :{{ModeofTransferStr}}</div>
              </div>
              <div class="col-md-4">
                <div class="label">Loan Status :{{LoanStatus}}</div>
              </div>
              <div class="col-md-4">
                <div class="label">Loan Type :{{LoanTypeCode}}</div>
              </div>
            </div>
            <div class="clearfix"></div>
            <div class="col-md-12">
              <div class="col-md-4">
                <div class="label">Is Approved :{{IsApproved}}</div>
              </div>
              <div class="col-md-4">
                <div class="label">SGST :{{SGST}}</div>
              </div>
              <div class="col-md-4">
                <div class="label">CGST :{{CGST}}</div>
              </div>
            </div>
            <div class="clearfix"></div>
            <div class="col-md-12">
              <div class="col-md-4">
                <div class="label">IGST :{{IGST}}</div>
              </div>
              <div class="col-md-4">
                <div class="label">TDS :{{TDS}}</div>
              </div>
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="clearfix"></div>
          <br/>
          <div>
            <div *ngIf="isTitle">
              <h3 class="col-md-12 col-sm-12 col-xs-12" style="color: #00c8aa !important;text-align: center">Loan Documents</h3>
            </div>
            <div *ngIf="loanDocumentdList!=0">
              <p-dataTable [value]="loanDocumentdList" [loading]="false" [rows]="10" [pageLinks]="3">
                <p-column field="LoanID" header="Loan ID"></p-column>
                <p-column field="DocumentType" header="Document Type"></p-column>
                <p-column field="FileName" header="File Name"></p-column>
                <p-column header="File Content">
                  <ng-template let-loanDocumentdList="rowData" pTemplate="body" let-ri="rowIndex">
                    <button type="button" style="width: 55px" pTooltip="Download" tooltipPosition="top" class="btn btndownload" (click)="DownloadDocument(ri)">
                      <i class="fa fa-download"></i>
                    </button>
                  </ng-template>
                </p-column>
              </p-dataTable>
            </div>

            <!--when row length is 0-->
            <div class="PTB70" *ngIf="loanDocumentdList==0">
              <div class="col-md-12 text-center">
                <p>{{'noLoanDocumentdetails' | translate}}
              </div>
              <div class="clearfix"></div>
            </div>
          </div>
        </div>
        <div class="clearfix"></div>
        <div class="modal-footer" style="text-align: center;background-color: #72767e !important;">
          <div class="col-md-12" style="margin-left: -25% !important;">
            <div class="col-md-12 col-md-offset-3">
              <button type="submit" (click)="LoanApprovedStatus('Yes')" class="btn btn-primary btnyes">Approved</button>
              <button type="submit" (click)="LoanApprovedStatus('No')" class="btn btn-primary btnno">Rejected</button> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <button type="button" class="btn btn-primary btncancel" (click)="closeForm()">Cancel</button>
            </div>
          </div>
          <div class="clearfix"></div>
        </div>

        <div class="margin-top-10"></div>
        <div class="clearfix"></div>
      </div>
    </div>
    <div class="clearfix"></div>
  </div>
  <div class="clearfix"></div>
</div>

<admin-footer></admin-footer>

<div class="confirm-modal-overay" *ngIf="isShowModal == 2" (click)="closeForm()"></div>